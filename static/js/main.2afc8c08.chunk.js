(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{372:function(e,t,c){},373:function(e,t,c){},374:function(e,t,c){},397:function(e,t,c){},398:function(e,t,c){},400:function(e,t,c){},401:function(e,t,c){},402:function(e,t,c){},403:function(e,t,c){},404:function(e,t,c){},405:function(e,t,c){},464:function(e,t,c){},465:function(e,t,c){},466:function(e,t,c){},467:function(e,t,c){},468:function(e,t,c){},469:function(e,t,c){},470:function(e,t,c){},471:function(e,t,c){},472:function(e,t,c){},473:function(e,t,c){"use strict";c.r(t);var n=c(2),o=c(0),a=c.n(o),r=c(18),i=c.n(r),s=(c(372),c(17)),l=(c(373),c(374),c(19)),d="CAMBIO_EL_FORMULARIO",u="CAMBIO_EL_SEARCH",j="EL_SEARCH_FUE_CLICKEADO",b="CARGARON_LAS_CATEGORIAS",h="CARGARON_LOS_PRODUCTOS",p="CARGARON_LAS_ORDENES",O="ADD_CARRITO",m="CAMBIAR_ESTADO_DE_USUARIO",g="CAMBIAR_ESTADO_DE_PRODUCTO_A_EDITAR",f="SETEA_USER",x="CATEGORIES_FILTER",v=function(e){return{type:p,orders:e}},C=function(e){return{type:O,carrito:e}},N=c(34),E=c(12),S=c.n(E);var R=Object(l.b)((function(e){return{search:e.search}}),(function(e){return{onSearchChange:function(t){e({type:u,search:t})},onSearchClick:function(t){e({type:j,search:t})},onCategoria:function(t){e({type:x,categories:t})}}}))((function(e){var t=e.search,c=e.onSearchChange,a=e.onSearchClick,r=e.onCategoria,i=Object(o.useState)(!1),l=Object(s.a)(i,2),d=(l[0],l[1],Object(o.useState)()),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(N.e)();return Object(o.useEffect)((function(){S.a.get("http://localhost:3001/category/").then((function(e){b(e.data),console.log("CATEGORIAS",e.data)}))}),[]),Object(n.jsxs)("div",{className:"buscador",children:[Object(n.jsx)("input",{className:"input",onKeyPress:function(e){"Enter"===e.key&&(a(t),h.push("/user/products"))},placeholder:"Buscar...",onChange:function(e){e.preventDefault(),c(e.target.value)}}),Object(n.jsx)("form",{className:"formCategorias",children:Object(n.jsxs)("select",{onChange:function(e){return function(e){console.log("hola",e.target.value),r(e.target.value)}(e)},name:"categorias",children:[Object(n.jsx)("option",{children:"Todas las categorias "}),j&&j.map((function(e){return Object(n.jsx)("option",{value:e.nombre,children:e.nombre},e.id)}))]})})]})})),y=c(26);var I=Object(l.b)((function(e){return{carrito:e.carrito,user:e.user,products:e.products}}))((function(e){var t=e.carrito,c=Object(o.useState)(0),a=Object(s.a)(c,2),r=a[0],i=a[1];return Object(o.useEffect)((function(){i(t.length),console.log("VERRRRRRRRRRRRRR",r)}),[e.carrito]),Object(n.jsxs)("div",{className:"divNavbarUser",children:[Object(n.jsx)("div",{className:"divLinksUser",children:Object(n.jsxs)("nav",{className:"links",children:[Object(n.jsx)(y.b,{to:"/",children:"Inicio"}),Object(n.jsx)(y.b,{to:"/user/products",children:"Catalogo"}),Object(n.jsxs)(y.b,{to:"/user/carrito",children:["Carrito ",Object(n.jsx)("span",{className:"spanCarrito",children:r})]}),Object(n.jsx)(y.b,{to:"/user/perfil",children:"Mi Perfil"}),Object(n.jsx)(y.b,{to:"/user/ordenes",children:"Ordenes"})]})}),Object(n.jsx)("div",{className:"SearchBar",children:Object(n.jsx)(R,{history:e.history})})]})})),A=(c(397),c(9)),D=(c(398),c(36)),k=c.n(D);var w=Object(l.b)((function(e){return{user:e.user,carrito:e.carrito,admin:"admin"===e.logged}}),(function(e){return{onAddCarrito:function(t){e(C(t))},onChangeEditProduct:function(t){e({type:g,editarProducto:t})}}}))((function(e){var t=Object(o.useState)({stock:"",img:e.img}),c=Object(s.a)(t,2),a=c[0],r=c[1],i=Object(N.e)();return Object(o.useEffect)((function(){e.stock<=0?r((function(e){return Object(A.a)(Object(A.a)({},e),{},{stock:"Sin disponibilidad"})})):r((function(t){return Object(A.a)(Object(A.a)({},t),{},{stock:e.stock})})),e.img&&(e.img.includes("http")||e.img.includes("www"))||r((function(t){return Object(A.a)(Object(A.a)({},t),{},{img:"http://localhost:3001/upload/"+e.img})}))}),[e.stock,e.img]),Object(n.jsx)(y.b,{className:"linkCard",to:"/detalle/"+e.id,children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"titulo",children:Object(n.jsx)("h1",{className:"titulo",children:e.nombre})}),Object(n.jsx)("div",{className:"div-imagen",children:Object(n.jsx)("img",{alt:e.nombre,src:a.img})}),Object(n.jsx)("div",{className:"div-precio",children:Object(n.jsxs)("h6",{className:"precio",children:[Object(n.jsx)("span",{children:"$"}),e.precio]})}),Object(n.jsxs)("div",{className:"boton-y-stock",children:[Object(n.jsx)("div",{className:"div-boton",children:function(){switch(e.user.admin){case!0:return Object(n.jsx)("button",{className:"boton-comprar",onClick:function(t){return function(t){t.preventDefault(),e.onChangeEditProduct(e.id),i.push("/admin/product/edit")}(t)},children:"Editar"});default:return Object(n.jsx)("button",{className:"boton-comprar",onClick:function(t){return function(t){t.preventDefault();var c={productId:e.id,nombre:e.nombre,precio:e.precio,cantidad:1};if(e.stock<=0)k()({title:"No contamos con stock de este producto",icon:"error"});else if(e.user.id)S.a.post("http://localhost:3001/user/".concat(e.user.id,"/cart"),{data:c}).then((function(t){return console.log("Todo Okey: ",t),S.a.get("http://localhost:3001/user/cart/".concat(e.user.id))})).then((function(t){console.log("ESTOS SON TODOS LOS ELEMENTOS DEL CARRITO",t.data),e.onAddCarrito(t.data)})).catch((function(e){if(e)return e}));else{for(var n=localStorage.getItem("carrito"),o=n?JSON.parse(n):[],a=!1,r=0;r<o.length;r++)if(o[r].productId===c.productId){console.log("Encontrado, cantidad antes de modificar: ",o[r].cantidad),o[r].cantidad++,a=!0,console.log("Encontrado, se modific\xf3 la cantidad: ",o[r].cantidad);break}a||(console.log("No se encontr\xf3, se pushe\xf3"),o.push(c)),localStorage.setItem("carrito",JSON.stringify(o)),e.onAddCarrito(o)}}(t)},children:"A\xf1adir al carrito"})}}()}),Object(n.jsxs)("h3",{className:"stock",children:[Object(n.jsx)("span",{children:"Stock:"})," ",a.stock]})]})]})})}));var P=Object(l.b)((function(e){return{search:e.searchFilter,products:e.products,filtrarCategoria:e.filtrarCategoria}}),(function(e){return{onProductsLoad:function(t){e(function(e){return{type:h,products:e}}(t))}}}))((function(e){var t=e.search,c=e.products,a=e.filtrarCategoria,r=e.onProductsLoad;console.log("Productos: ",c);var i=Object(o.useState)(),l=Object(s.a)(i,2),d=(l[0],l[1]);return Object(o.useEffect)((function(){var e="";e=t?"http://localhost:3001/product/busqueda/"+t:"http://localhost:3001/product",S.a.get(e).then((function(e){a&&S.a.get("http://localhost:3001/product/categoria/"+a).then((function(e){e.data;console.log("R filtrado por categoria: ",e.data[0].products),r(e.data[0].products)})).catch((function(e){return console.log("Axios err: ",e)})),r(e.data)})).catch((function(e){return console.log("NO RESOLVI\xd3: ",e)})),S.a.get("http://localhost:3001/category/").then((function(e){d(e.data),console.log("CATEGORIAS",e.data)}))}),[a,t,r]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"divcards",children:c&&c.map((function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(w,{id:e.id,nombre:e.nombre,descripcion:e.descripcion,stock:e.stock,precio:e.precio,img:e.img})},e.id)}))}),Object(n.jsx)("div",{className:"nuevo-div",children:Object(n.jsxs)("div",{className:"div-img-dada",children:[Object(n.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/88/88271.png",alt:"img"}),Object(n.jsxs)("div",{className:"div-texto-dada",children:[Object(n.jsx)("h1",{children:"Contactanos"}),Object(n.jsx)("div",{className:"divReserva",children:Object(n.jsx)("p",{children:"Reserve su plaza para visitas guiadas por nuestros campos de cultivos y cata de nuestra mejor reserva"})}),Object(n.jsxs)("div",{className:"divContactos",children:[Object(n.jsxs)("p",{children:["wearewine",Object(n.jsx)("span",{children:"@"}),"drinks.com"]}),Object(n.jsx)("p",{children:"/"}),Object(n.jsxs)("p",{children:["(",Object(n.jsx)("span",{children:"351"}),") 173-4965"]})]})]})]})})]})})),T=c(29),L=c(199);c(400);var U=Object(l.b)((function(e){return{formulario:e.formulario,categoria:e.categoria}}),(function(e){return{onFormChange:function(t){e(function(e){return{type:d,form:e}}(t))},onCategoriesLoad:function(t){e({type:b,categories:t})}}}))((function(e){var t=e.formulario,c=e.categoria,a=e.onFormChange,r=e.onCategoriesLoad;function i(e){if(e.preventDefault(),console.log("Form: ",t),"file"===e.target.name)if(e.target.files[0]){var c,n=e.target.files[0].name.split(".");n=n[n.length-1],a(Object(A.a)(Object(A.a)({},t),{},(c={},Object(T.a)(c,e.target.name,e.target.files[0]),Object(T.a)(c,"fileShow",URL.createObjectURL(e.target.files[0])),Object(T.a)(c,"img",t.nombre+"."+n),c))),document.getElementById("imagen").style.display="none"}else{var o;a(Object(A.a)(Object(A.a)({},t),{},(o={},Object(T.a)(o,e.target.name,null),Object(T.a)(o,"fileShow",null),o))),document.getElementById("imagen").style.display="initial"}else a(Object(A.a)(Object(A.a)({},t),{},Object(T.a)({},e.target.name,e.target.value)))}return console.log("SOY FORM PRODUCT",c),Object(o.useEffect)((function(){S.a.get("http://localhost:3001/category/").then((function(e){console.log("Categorias: ",e.data),r(e.data)})).catch((function(e){return console.log("Error: ",e)}))}),[r]),Object(n.jsx)("div",{className:"divAgregarProducto",children:Object(n.jsxs)("form",{className:"agregarProducto",onSubmit:function(e){e.preventDefault(),console.log("Click!");var c=document.getElementById("boton");c.disabled=!0,console.log("Boton: ",c),S.a.post("http://localhost:3001/product/",t).then((function(e){if(console.log("Producto agregado"),t.file){var n=t.file.name.split(".");console.log("Extension: ",n[n.length-1]);var o=new FormData;o.append("file",t.file,t.nombre+"."+n[n.length-1]);S.a.post("http://localhost:3001/upload",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return console.log("Se subi\xf3: ",e)})).catch((function(e){return console.log("No se subi\xf3: ",e)}))}c.disabled=!1,a({formulario:null}),document.getElementById("nombre").value="",document.getElementById("descripcion").value="",document.getElementById("origen").value="",document.getElementById("tipo").value="",document.getElementById("elaboracion").value="",document.getElementById("edad").value="",document.getElementById("stock").value="",document.getElementById("precio").value="",document.getElementById("imagen").value="",console.log("FILE: ",document.getElementById("file")),document.getElementById("file").value=[],alert("Producto agregado correctamente!")})).catch((function(e){console.log("mal",e),c.disabled=!1}))},encType:"multipart/form-data",children:[Object(n.jsx)("h3",{children:"Agregar Producto"}),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Nombre del producto",id:"nombre",name:"nombre"},"nombre"),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Descripci\xf3n",id:"descripcion",name:"descripcion"},"descripcion"),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Lugar de origen",id:"origen",name:"origen"},"origen"),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Tipo",id:"tipo",name:"tipo"},"tipo"),Object(n.jsx)("input",{type:"number",onChange:i,placeholder:"Fecha de elaboraci\xf3n",id:"elaboracion",name:"elaboracion"},"elaboracion"),Object(n.jsx)("input",{type:"number",onChange:i,placeholder:"Edad de maduraci\xf3n",id:"edad",name:"edad"},"edad"),Object(n.jsx)("input",{type:"number",onChange:i,placeholder:"Stock",id:"stock",name:"stock"},"stock"),Object(n.jsx)("input",{type:"number",onChange:i,placeholder:"Precio",id:"precio",name:"precio"},"precio"),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Link a una imagen o...",id:"imagen",name:"img"},"img"),Object(n.jsx)("input",{type:"file",onChange:i,id:"file",name:"file"},"file"),c&&c.map((function(e){return Object(n.jsxs)("label",{title:e.descripcion,children:[Object(n.jsx)("input",{onChange:function(e){return function(e){console.log("Checkbox name: ",e.target.checked),console.log("Texto: ",e.target.name),e.target.checked?a(Object(A.a)(Object(A.a)({},t),{},{categories:[].concat(Object(L.a)(t.categories),[e.target.name])})):a(Object(A.a)(Object(A.a)({},t),{},{categories:t.categories.filter((function(t){return!(t===e.target.name)}))}))}(e)},title:e.descripcion,name:e.nombre,type:"checkbox"}),e.nombre]})})),t.img&&!t.file?Object(n.jsx)("img",{src:t.img,alt:"img",style:{width:"200px",height:"200px",marginBottom:"10px"}}):t.file?Object(n.jsx)("img",{src:t.fileShow,alt:"img",style:{width:"200px",height:"200px",marginBottom:"10px"}}):void 0,Object(n.jsx)("div",{className:"divBotonAP",children:Object(n.jsx)("input",{className:"botonAP",type:"submit",id:"boton"},"boton")})]})})}));c(401);function B(e){var t=Object(o.useState)({}),c=Object(s.a)(t,2),a=c[0],r=c[1];function i(e){e.preventDefault(),r(Object(A.a)(Object(A.a)({},a),{},Object(T.a)({},e.target.name,e.target.value)))}return Object(n.jsx)("div",{className:"divAgregarCategoria",children:Object(n.jsxs)("form",{className:"agregarCategoria",onSubmit:function(e){S.a.post("http://localhost:3001/category/add",a).then((function(e){console.log("bien",e)})).catch((function(e){console.log("mal",e)}))},children:[Object(n.jsx)("h1",{children:"Agregar Categoria"}),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Nombre",name:"nombre"},"nombre"),Object(n.jsx)("input",{type:"text",onChange:i,placeholder:"Descripcion",name:"descripcion"},"descripcion"),Object(n.jsx)("div",{className:"divBotonAC",children:Object(n.jsx)("input",{className:"botonAC",type:"submit"},"boton")})]})})}function _(e){var t=Object(o.useState)(null),c=Object(s.a)(t,2),a=c[0],r=c[1],i=e.match.params.id;return Object(o.useEffect)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;S.a.get("http://localhost:3001/product/"+e).then((function(e){r(e.data),console.log("Respondi\xf3: ",e.data)})).catch((function(e){return console.log("Error: ",e)}))}),[i]),Object(n.jsxs)("div",{children:[a&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{className:"name",children:a.nombre}),Object(n.jsx)("p",{children:a.precio}),Object(n.jsx)("img",{className:"productImg",src:a.img,alt:"img"}),Object(n.jsx)("button",{className:"boton-comprar",children:"COMPRAR"})]}),!a&&Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:"CARGANDO..."})})]})}c(402);function G(e){var t=Object(N.e)(),c=Object(o.useState)({id:e.id}),a=Object(s.a)(c,2),r=a[0],i=a[1],l=Object(o.useState)(null),d=Object(s.a)(l,2),u=d[0],j=d[1];function b(e){i(Object(A.a)(Object(A.a)({},r),{},{productos:Object(A.a)(Object(A.a)({},r.productos),{},Object(T.a)({},e.target.name,e.target.value))}))}return Object(o.useEffect)((function(){S.a.get("http://localhost:3001/product/"+e.id).then((function(e){console.log("Data de respuesta: ",e.data),e.data.img&&(e.data.img.includes("http")||e.data.img.includes("www"))?j(e.data.img):j("http://localhost:3001/upload/"+e.data.img),e.data.categories=e.data.categories.map((function(e){return e.nombre})),i((function(t){return{id:e.data.id,productos:e.data}})),S.a.get("http://localhost:3001/category/").then((function(e){console.log("Categorias: ",e.data),i((function(t){return Object(A.a)(Object(A.a)({},t),{},{cats:e.data})}))})).catch((function(e){return console.log("Error: ",e)}))}))}),[]),Object(n.jsx)("div",{className:"divEditarProductos",children:r.productos&&Object(n.jsxs)("div",{className:"edicion",children:[Object(n.jsx)("h5",{children:"NOMBRE"}),Object(n.jsx)("input",{className:"inputEditar",type:"text",onChange:function(e){return b(e)},value:r.productos.nombre,placeholder:"Nombre",name:"nombre"},r.id),Object(n.jsx)("h5",{children:"TIPO"}),Object(n.jsx)("input",{className:"inputEditar",type:"text",onChange:function(e){return b(e)},value:r.productos.tipo,placeholder:"Tipo",name:"tipo"},r.id+1),Object(n.jsx)("h5",{children:"EDAD"}),Object(n.jsx)("input",{className:"inputEditar",type:"number",onChange:function(e){return b(e)},value:r.productos.edad,placeholder:"Edad",name:"edad"},r.id+2),Object(n.jsx)("h5",{children:"ELABORACION"}),Object(n.jsx)("input",{className:"inputEditar",type:"number",onChange:function(e){return b(e)},value:r.productos.elaboracion,placeholder:"Elaboracion",name:"elaboracion"},r.id+3),Object(n.jsx)("h5",{children:"STOCK"}),Object(n.jsx)("input",{className:"inputEditar",type:"number",onChange:function(e){return b(e)},value:r.productos.stock,placeholder:"Stock",name:"stock"},r.id+4),Object(n.jsx)("h5",{children:"PRECIO"}),Object(n.jsx)("input",{className:"inputEditar",type:"number",onChange:function(e){return b(e)},value:r.productos.precio,placeholder:"Precio",name:"precio"},r.id+5),Object(n.jsx)("h5",{children:"ORIGEN"}),Object(n.jsx)("input",{className:"inputEditar",type:"text",onChange:function(e){return b(e)},value:r.productos.origen,placeholder:"Origen",name:"origen"},r.id+6),Object(n.jsx)("h5",{children:"DESCRIPCION"}),Object(n.jsx)("input",{className:"inputEditar",type:"text",onChange:function(e){return b(e)},value:r.productos.descripcion,placeholder:"Descripcion",name:"descripcion"},r.id+7),Object(n.jsx)("h5",{children:"CATEGORIAS"}),r.cats&&r.cats.map((function(e){return Object(n.jsxs)("label",{title:e.descripcion,children:[Object(n.jsx)("input",{onChange:function(e){return function(e){console.log("Checkbox name: ",e.target.checked),console.log("Texto: ",e.target.name),e.target.checked?i(Object(A.a)(Object(A.a)({},r),{},{productos:Object(A.a)(Object(A.a)({},r.productos),{},{categories:[].concat(Object(L.a)(r.productos.categories),[e.target.name])})})):i(Object(A.a)(Object(A.a)({},r),{},{productos:Object(A.a)(Object(A.a)({},r.productos),{},{categories:r.productos.categories.filter((function(t){return!(t===e.target.name)}))})}))}(e)},checked:r.productos.categories.includes(e.nombre),title:e.descripcion,name:e.nombre,type:"checkbox"}),e.nombre]})})),Object(n.jsx)("p",{}),Object(n.jsx)("div",{className:"divImagenEditar",children:Object(n.jsx)("img",{alt:r.productos.nombre,src:u,className:"imagenEdit"})}),Object(n.jsxs)("div",{className:"divBotonesEditar",children:[Object(n.jsx)("button",{className:"botonEliminar",onClick:function(){return e=r.productos.id,console.log(" ELIMINAR: ",e),void S.a.delete("http://localhost:3001/product/",{data:{id:e}}).then((function(e){console.log("bien",e),t.push("/user/products")})).catch((function(e){console.log("mal",e)}));var e},children:"Eliminar"}),Object(n.jsx)("button",{className:"botonListo",onClick:function(){S.a.put("http://localhost:3001/product",r.productos).then((function(e){console.log("bien",e),console.log("STATE EDITAR: ",r.productos),t.push("/user/products")})).catch((function(e){console.log("mal",e)}))},children:"Listo"})]})]})})}c(403);function F(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("header",{className:"header",children:Object(n.jsxs)("section",{className:"textos-header",children:[Object(n.jsxs)("h1",{children:["We",Object(n.jsx)("span",{children:"Are"}),"Wine"]}),Object(n.jsxs)("h2",{children:["Vinos ",Object(n.jsx)("span",{children:"Nacionales"})," e ",Object(n.jsx)("span",{children:"Internacionales"})]})]})}),Object(n.jsx)(P,{data:S.a.get("http://localhost:3001/product")})]})}c(404);function J(e){return Object(n.jsxs)("div",{className:"divNavbarAdmin",children:[Object(n.jsx)("div",{className:"divLinksAdmin",children:Object(n.jsxs)("nav",{children:[Object(n.jsx)(y.b,{to:"/",children:"Inicio"}),Object(n.jsx)(y.b,{to:"/user/products",children:"Catalogo"}),Object(n.jsx)(y.b,{to:"/admin/formProduct",children:"Agregar producto"}),Object(n.jsx)(y.b,{to:"/admin/formCategory",children:"Agregar categoria"}),Object(n.jsx)(y.b,{to:"/admin/ordenes",children:"Ver ordenes"}),Object(n.jsx)(y.b,{to:"/admin/usuarios",children:"Usuarios"})]})}),Object(n.jsx)("button",{className:"botonCerrarSesionAdmin",onClick:function(){S.a.get("http://localhost:3001/auth/logout",{withCredentials:!0}).then((function(e){window.location.replace("http://localhost:3000/")})).catch((function(e){console.log(e)}))},children:"Salir"}),Object(n.jsx)("div",{children:Object(n.jsx)(R,{history:e.history})})," "]})}c(405);var z=Object(l.b)((function(e){return{carrito:e.carrito,user:e.user,products:e.products}}))((function(e){var t=e.carrito,c=Object(o.useState)(0),a=Object(s.a)(c,2),r=a[0],i=a[1];return Object(o.useEffect)((function(){i(t.length),console.log("VERRRRRRRRRRRRRR",r)}),[e.carrito]),Object(n.jsxs)("div",{className:"divNavbarGuest",children:[Object(n.jsx)("div",{className:"divLinksGuest",children:Object(n.jsxs)("nav",{className:"links",children:[Object(n.jsx)(y.b,{to:"/",children:"Inicio"}),Object(n.jsx)(y.b,{to:"/user/products",children:"Catalogo"}),Object(n.jsxs)(y.b,{to:"/user/carrito",children:["Carrito ",Object(n.jsx)("span",{className:"spanCarrito",children:r})]}),Object(n.jsx)(y.b,{to:"/user/nuevo",children:"Registrarse"}),Object(n.jsx)(y.b,{to:"/user/ingresar",children:"Logearse"})]})}),Object(n.jsx)("div",{style:{marginRight:"10px"},children:Object(n.jsx)(R,{history:e.history})})," "]})})),M=c(242),V=c.n(M),Y=c(352),q=c(233),K=c.n(q),$=c(333),H=c(200),W=c(332),X=c(61);function Q(e){var t=e.data;console.log("esto es data ",t);Object(X.a)();function c(e,t){e.preventDefault(),console.log(e.target.cat.value),console.log(t);var c={estado:e.target.cat.value};console.log(c),S.a.put("http://localhost:3001/user/orders/"+t,c).then((function(e){k()({title:"Oden Actualizada correctamente",text:"Ahora su estado es: "+c.estado+"!!",icon:"success"}),window.location.reload()})).catch((function(e){console.log(e)}))}return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:["Numero de orden: ",t.id]}),Object(n.jsxs)("p",{children:["Id de usuario: ",t.userId]}),Object(n.jsxs)("p",{children:["Nombre del Usuario: ",t.user&&t.user.nombre," ",t.user&&t.user.apellido]}),Object(n.jsxs)("p",{children:["Correo: ",t.user&&t.user.email]}),Object(n.jsxs)("p",{children:["Estado: ",t.estado]}),Object(n.jsx)("form",{onSubmit:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.id;return c(e,n)},children:Object(n.jsx)("div",{className:"multiselect",children:Object(n.jsxs)("div",{className:"selectBox",children:[Object(n.jsxs)("select",{name:"cat",children:[Object(n.jsx)("option",{value:"carrito",children:"Carrito"}),Object(n.jsx)("option",{value:"creada",children:"Creada"}),Object(n.jsx)("option",{value:"procesando",children:"Procesando"}),Object(n.jsx)("option",{value:"cancelada",children:"Cancelada"}),Object(n.jsx)("option",{value:"completa",children:"Completa"})]}),Object(n.jsx)("input",{type:"submit",value:"Cambiar Estado de la orden."})]})})})]})}var Z,ee=[{title:"# Orden",field:"id"},{title:"Estado",field:"estado"},{title:"ID Usuario",field:"user.id"},{title:"Nombre",field:"user.nombre"},{title:"Apellido",field:"user.apellido"}],te=Object(W.a)((function(e){return{modal:{position:"absolute",width:600,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},iconos:{cursor:"pointer"},inputMaterial:{width:"100%"}}}));var ce=Object(l.b)((function(e){return{orders:e.orders}}),(function(e){return{setOrders:function(t){e(v(t))}}}))((function(e){var t=te(),c=Object(o.useState)(),a=Object(s.a)(c,2),r=a[0],i=a[1],l=Object(o.useState)(!1),d=Object(s.a)(l,2),u=d[0],j=d[1],b=function(){var e=Object(Y.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("http://localhost:3001/user/orders").then((function(e){console.log("response :",e.data),i(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("orders :",r),Object(o.useEffect)((function(){b()}),[]);var h=function(){j(!u)},p=Object(n.jsxs)("div",{className:t.modal,children:[Object(n.jsx)("h3",{children:"Orden Seleccionada "}),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Q,{data:Z})}),Object(n.jsx)("div",{align:"right",children:Object(n.jsx)($.a,{color:"black",onClick:function(){return h()},children:"Cerrar"})})]});return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(K.a,{columns:ee,data:r,title:"Ordenes de los usuarios",actions:[{icon:"save",tooltip:"Editar",onClick:function(e,t){return function(e){var t=r.filter((function(t){return t.id===e}));Z=t[0],h()}(t.id)}}],options:{actionsColumnIndex:-1,filtering:!0,headerStyle:{backgroundColor:"rgba(158, 22, 22, 0.733)",color:"#FFF",fontSize:"1.5em"}},localization:{header:{actions:"Ver Orden"}}}),Object(n.jsx)(H.a,{open:u,onClose:h,children:p})]})}));c(464);var ne=Object(l.b)((function(e){return{user:e.user,carrito:e.carrito}}),(function(e){return{onAddCarrito:function(t){e(C(t))}}}))((function(e){var t=Object(N.e)(),c=Object(o.useState)({}),a=Object(s.a)(c,2),r=a[0],i=a[1];function l(c){console.log("Probando: ",r),c.preventDefault(),r.coinciden?S.a.post("http://localhost:3001/user/",{data:r,user:e.user},{withCredentials:!0}).then((function(c){console.log("esta es la respuesta con el user",c.data.userId),k()({title:"Cuenta creada con exito!!",text:"Ahora podra iniciar sesion.",icon:"success"});var n=JSON.parse(localStorage.getItem("carrito"));console.log("soy store",n),n&&n.map((function(e){var t={cantidad:e.cantidad,precio:e.precio,productId:e.productId,nombre:e.nombre};console.log("mi obj",t),S.a.post("http://localhost:3001/user/"+c.data.userId+"/cart",{data:t}).then((function(e){console.log("producto agregado",e)})).catch((function(e){console.log("esto es un error",e)}))})),localStorage.removeItem("carrito"),e.onAddCarrito([]),t.push("/user/ingresar")})).catch((function(e){console.log("mal",e)})):k()({title:"Las contrase\xf1as no coinciden",text:"Verifiquelas para continuar",icon:"error"})}function d(e){var t;if(e.preventDefault(),"repetirClave"===e.target.name&&r.clave===e.target.value||"clave"===e.target.name&&r.repetirClave===e.target.value)console.log("Las contrase\xf1as coinciden"),i(Object(A.a)(Object(A.a)({},r),{},(t={},Object(T.a)(t,e.target.name,e.target.value),Object(T.a)(t,"coinciden",!0),t)));else if("repetirClave"===e.target.name||"clave"===e.target.name){var c;console.log("Las contrase\xf1as no coinciden"),i(Object(A.a)(Object(A.a)({},r),{},(c={},Object(T.a)(c,e.target.name,e.target.value),Object(T.a)(c,"coinciden",!1),c)))}else i(Object(A.a)(Object(A.a)({},r),{},Object(T.a)({},e.target.name,e.target.value)))}return Object(n.jsx)("div",{className:"divNuevoUsuario",children:Object(n.jsxs)("form",{className:"nuevoUsuario",onSubmit:l,children:[Object(n.jsx)("h1",{children:"Crear Usuario"}),Object(n.jsx)("input",{type:"text",onChange:d,placeholder:"Nombre...",name:"nombre"},"nombre"),Object(n.jsx)("input",{type:"text",onChange:d,placeholder:"Apellido...",name:"apellido"},"apellido"),Object(n.jsx)("input",{type:"text",onChange:d,placeholder:"Nombre de usuario...",name:"nombreDeUsuario"},"nombreDeUsuario"),Object(n.jsx)("input",{type:"email",onChange:d,placeholder:"Email...",name:"email"},"email"),Object(n.jsx)("input",{type:"password",onChange:d,placeholder:"Contrase\xf1a...",name:"clave"},"clave"),Object(n.jsx)("input",{type:"password",onKeyPress:function(e){"Enter"===e.key&&l(e)},onChange:d,placeholder:"Repita su contrase\xf1a",name:"repetirClave"},"repetirClave"),Object(n.jsx)("div",{className:"divBotonRegister",children:Object(n.jsx)("input",{className:"botonRegister",type:"submit",value:"Registrarse"},"boton")})]})})}));c(465);var oe=Object(l.b)((function(e){return{carrito:e.carrito,user:e.user,products:e.products}}),(function(e){return{onAddCarrito:function(t){e(C(t))}}}))((function(e){var t=e.carrito,c=e.user,a=e.onAddCarrito,r=e.products,i=Object(o.useState)(0),l=Object(s.a)(i,2),d=l[0],u=l[1];function j(e){var t=0;e.forEach((function(e){return t+=e.precio*e.cantidad})),u(t)}function b(e,t){var n;r.forEach((function(e){e.id===t.productId&&(n=e.stock)}));var o={cantidad:e.target.value,productId:t.productId};if(e.target.value>0&&e.target.value<=n)if(c.id)S.a.put("http://localhost:3001/user/cart/".concat(c.id),o).then((function(e){return S.a.get("http://localhost:3001/user/cart/".concat(c.id))})).then((function(e){a(e.data),j(e.data)})).catch((function(e){console.log("ESTO ES UN ERROR",e)}));else{for(var i=JSON.parse(localStorage.getItem("carrito")),s=0;s<i.length;s++)i[s].productId===t.productId&&(i[s].cantidad=e.target.value);localStorage.setItem("carrito",JSON.stringify(i)),a(i),j(i)}else if(e.target.value<=0)if(e.target.value=1,c.id)o.cantidad=1,S.a.put("http://localhost:3001/user/cart/".concat(c.id),o).then((function(e){return S.a.get("http://localhost:3001/user/cart/".concat(c.id))})).then((function(e){a(e.data),j(e.data)})).catch((function(e){console.log("ESTO ES UN ERROR",e)}));else{for(var l=JSON.parse(localStorage.getItem("carrito")),d=0;d<l.length;d++)l[d].productId===t.productId&&(l[d].cantidad=1);localStorage.setItem("carrito",JSON.stringify(l)),a(l),j(l)}else if(k()({title:"No hay suficiente stock",icon:"warning"}),e.target.value=n,c.id)o.cantidad=n,S.a.put("http://localhost:3001/user/cart/".concat(c.id),o).then((function(e){return S.a.get("http://localhost:3001/user/cart/".concat(c.id))})).then((function(e){a(e.data),j(e.data)})).catch((function(e){console.log("ESTO ES UN ERROR",e)}));else{for(var u=JSON.parse(localStorage.getItem("carrito")),b=0;b<u.length;b++)u[b].productId===t.productId&&(u[b].cantidad=n);localStorage.setItem("carrito",JSON.stringify(u)),a(u),j(u)}}function h(e,t){if(c.id)S.a.delete("http://localhost:3001/user/delete/".concat(t.productId,"/").concat(c.id)).then((function(e){return S.a.get("http://localhost:3001/user/cart/".concat(c.id))})).then((function(e){a(e.data),j(e.data)})).catch((function(e){console.log("ESTO ES UN ERROR",e)}));else{var n=JSON.parse(localStorage.getItem("carrito"));console.log("ANTES DE BORRAR: ",n);for(var o=0;o<n.length;o++)if(n[o].productId===t.productId){console.log("ENCONTRADO"),n.splice(o,1);break}console.log("DESPUES DE BORRAR: ",n),localStorage.setItem("carrito",JSON.stringify(n)),a(n),j(n)}}console.log("mi carrito",t),console.log("productso",r),Object(o.useEffect)((function(){!function(){if(c.id)S.a.get("http://localhost:3001/user/cart/".concat(c.id)).then((function(e){a(e.data),j(e.data)})).catch((function(e){console.log("ESTO ES UN ERROR",e)}));else{var e=localStorage.getItem("carrito");e&&(e=JSON.parse(e),t[0]||a(e),j(e))}}()}),[c]);var p=Object(N.e)();return Object(n.jsx)("div",{className:"divGeneralCarrito",children:Object(n.jsxs)("div",{className:"divCarrito",children:[Object(n.jsx)("h1",{children:"Carrito de compras"}),t&&t.map((function(e){return Object(n.jsxs)("div",{className:"divProducto",children:[Object(n.jsx)("div",{className:"divNombre",children:Object(n.jsx)("h3",{children:e.nombre})}),Object(n.jsx)("div",{className:"spanPrecios",children:Object(n.jsxs)("span",{children:["Precio Unidad: ",Object(n.jsxs)("span",{className:"precio",children:["$",e.precio]})]})}),Object(n.jsxs)("div",{className:"cantidad",children:[Object(n.jsx)("span",{children:"Cantidad: "}),Object(n.jsx)("input",{type:"number",onChange:function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return b(t,c)},placeholder:e.cantidad,name:"cantidad"},-1*e.id)]}),Object(n.jsx)("div",{className:"spanPrecios",children:Object(n.jsxs)("span",{children:["Precio Total: ",Object(n.jsxs)("span",{className:"precioTotal",children:["$",e.precio*e.cantidad]})]})}),Object(n.jsx)("div",{className:"divBoton",children:Object(n.jsx)("img",{alt:"imagen de producto",src:"https://www.vhv.rs/dpng/d/446-4464515_trashcan-trash-can-clipart-png-garbage-can-clipart.png",className:"eliminar",onClick:function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return h(0,c)}})})]},e.id)})),t[0]&&Object(n.jsx)("div",{onClick:function(){c.id?S.a.delete("http://localhost:3001/user/cart/".concat(c.id)).then((function(e){return S.a.get("http://localhost:3001/user/cart/".concat(c.id))})).then((function(e){a(e.data),j(e.data)})).catch((function(e){console.log("ESTO ES UN ERROR",e)})):(localStorage.setItem("carrito",[]),a([]),j([])),k()({title:"Tu carrito se ha vaciado!!",icon:"success"})},className:"vaciar",children:Object(n.jsx)("button",{children:" vaciar carrito "})}),t[0]&&Object(n.jsx)("div",{className:"montoTotal",children:Object(n.jsxs)("h1",{children:[Object(n.jsx)("span",{children:"Total:"}),"$",d]})}),t[0]&&Object(n.jsx)("div",{onClick:function(){c.id?p.push("/user/pagar"):(k()({title:"Debe registarse para continuar",text:"...sera redirigido automaticamente",icon:"info"}),p.push("/user/nuevo"))},className:"vaciar",children:Object(n.jsx)("button",{children:" Finalizar Compra "})})]})})}));c(466);function ae(e){var t=Object(o.useState)({}),c=Object(s.a)(t,2),a=c[0],r=c[1];function i(e){e.preventDefault(),S.a.post("http://localhost:3001/auth/login",a,{withCredentials:!0}).then((function(e){window.location.replace("http://localhost:3000/")})).catch((function(e){console.log("Mallllllllllllllllllll",e),console.log("ESTADO: ",a),k()({title:"No logueado",text:"Intente nuevamente o cree un cuenta",icon:"error"})}))}function l(e){e.preventDefault(),r(Object(A.a)(Object(A.a)({},a),{},Object(T.a)({},e.target.name,e.target.value)))}return Object(n.jsx)("div",{className:"divLogin",children:Object(n.jsxs)("form",{onSubmit:i,className:"iniciarSesion",children:[Object(n.jsx)("h1",{children:"Iniciar Sesion"}),Object(n.jsx)("input",{type:"text",placeholder:"Nombre de Usuario",onChange:l,name:"username"},"username"),Object(n.jsx)("input",{onKeyPress:function(e){"Enter"===e.key&&i(e)},type:"password",placeholder:"Contrase\xf1a",onChange:l,name:"password"},"password"),Object(n.jsx)("div",{className:"divBotonLogin",children:Object(n.jsx)("input",{className:"botonLogin",type:"submit",value:"Entrar"},"boton")}),Object(n.jsx)("span",{children:"o continue con"}),Object(n.jsxs)("button",{className:"botonGoogle",onClick:function(e){e.preventDefault(),window.open("http://localhost:3001/auth/google")},children:[Object(n.jsx)("div",{className:"imagenGoogle"}),Object(n.jsx)("span",{className:"spanG",children:"G"}),Object(n.jsx)("span",{className:"spanO",children:"o"}),Object(n.jsx)("span",{className:"spanO2",children:"o"}),Object(n.jsx)("span",{className:"spanG2",children:"g"}),Object(n.jsx)("span",{className:"spanL",children:"l"}),Object(n.jsx)("span",{className:"spanE",children:"e"})]})]})})}function re(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{style:{color:"red",marginTop:"25px"},children:"No tienes acceso"}),Object(n.jsxs)("h1",{style:{color:"green",marginTop:"25px"},children:["Solo los ",e.access," tienen acceso aqu\xed!!"]})]})}c(467);function ie(e){var t=Object(o.useState)([]),c=Object(s.a)(t,2),a=c[0],r=c[1];return Object(o.useEffect)((function(){S.a.get("http://localhost:3001/product/"+e.id+"/review").then((function(e){console.log("Hola es Armando :",e.data),r(e.data)})).catch((function(e){console.log("ERROR")}))}),[]),Object(n.jsxs)("div",{className:"review",children:[!a[0]&&Object(n.jsx)("h2",{children:"No hay reviews para este producto."}),Object(n.jsx)("h3",{children:"Lo que opinan los clientes..."}),a&&a.map((function(e){return Object(n.jsxs)("div",{className:!0,children:["-",e.user.nombre," ",e.user.apellido,": ",e.descripcion,"-calificacion: ",e.calificacion," ","estrellas..."]})}))]})}c(468);var se=Object(l.b)((function(e){return{products:e.products}}))((function(e){var t=e.match.params.id,c=Object(o.useState)(null),a=Object(s.a)(c,2),r=a[0],i=a[1],l=Object(o.useState)(null),d=Object(s.a)(l,2),u=d[0],j=d[1];return Object(o.useEffect)((function(){r||S.a.get("http://localhost:3001/product/".concat(t)).then((function(e){console.log(e),i(e.data),e.data.img&&(e.data.img.includes("http")||e.data.img.includes("www"))?j(e.data.img):j("http://localhost:3001/upload/"+e.data.img)})).catch((function(e){console.log("ERROR")}))}),[]),Object(n.jsx)("div",{className:"divFondoDeDetalleDeProducto",children:Object(n.jsxs)("div",{children:[!r&&Object(n.jsx)("h1",{children:"CARGANDO..."}),r&&Object(n.jsxs)("div",{className:"divGeneralDetalleProducto",children:[Object(n.jsxs)("div",{className:"divDetallesDeProducto",children:[Object(n.jsx)("h1",{children:r.nombre}),Object(n.jsx)("div",{className:"divImagenDetalleProducto",children:Object(n.jsx)("img",{alt:r.nombre,src:u})})]}),Object(n.jsx)("div",{className:"divDescripcionDetalleProducto",children:Object(n.jsxs)("h3",{children:['"',r.descripcion,'"']})})]}),Object(n.jsx)(ie,{id:t})]})})}));c(469);var le=Object(l.b)((function(e){return{user:e.user,categoria:e.categoria}}))((function(e){return Object(n.jsxs)("div",{className:"divGeneralPerfil",children:[e.user&&Object(n.jsxs)("div",{className:"divPerfil",children:[Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"Nombre:"})," ",e.user.nombre]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"Apellido:"})," ",e.user.apellido]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"NombreDeUsuario:"})," ",e.user.nombreDeUsuario]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"Email:"})," ",e.user.email]})]}),Object(n.jsx)("button",{className:"botonPerfil",onClick:function(){S.a.get("http://localhost:3001/auth/logout",{withCredentials:!0}).then((function(e){console.log(e),window.location.replace("http://localhost:3000/")})).catch((function(e){console.log(e)}))},children:"CERRAR SESION"})]})}));var de=Object(l.b)((function(e){return{user:e.user,categoria:e.categoria}}),(function(e){return{onOrdersLoad:function(t){e(v(t))}}}))((function(e){var t,c=Object(o.useState)(),a=Object(s.a)(c,2),r=a[0],i=a[1],l=Object(o.useState)({userId:e.user.id}),d=Object(s.a)(l,2),u=d[0],j=d[1];function b(e){console.log("estadooo",u),"calificacion"===e.target.name&&(e.target.value>5&&(e.target.value=5),e.target.value<1&&(e.target.value=1)),j(Object(A.a)(Object(A.a)({},u),{},Object(T.a)({},e.target.name,e.target.value)))}function h(e,t){S.a.post("http://localhost:3001/product/"+t.productId+"/review",u).then((function(e){k()({title:"Gracias por dejarnos su opinion!!",icon:"success"}),window.location.replace("http://localhost:3000/")})).catch((function(e){console.log("HUBO UN ERROR AL CARGAR REVIEW"),k()({title:"Ya hay un review suya para este producto",text:"Gracias por compartir su opinion.",icon:"info"})}))}return e.match&&(t=e.match.params.status),console.log("Status: ",t),Object(o.useEffect)((function(){S.a.get("http://localhost:3001/user/"+e.user.id+"/orders/completas").then((function(e){i(e.data),console.log(e.data)})).catch((function(e){return console.log("Error: ",e)}))}),[]),Object(n.jsx)("div",{children:r&&r.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:e.nombre}),Object(n.jsxs)("form",{onSubmit:function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return h(0,c)},children:[Object(n.jsx)("input",{type:"text",onChange:b,placeholder:"descripcion",id:"descripcion",name:"descripcion"},"descripcion"),Object(n.jsx)("input",{type:"number",onChange:b,placeholder:"calificacion",id:"calificacion",name:"calificacion"},"calificacion"),Object(n.jsx)("input",{type:"submit",id:"boton"},"boton")]})]})}))})}));c(470);var ue=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.productos,c=e.data,a=e.user,r=Object(N.e)();console.log("SOY ORDEID",t),console.log("SOY ORDENID",t[0].ordenId);var i=Object(o.useState)({ordenId:t[0].ordenId}),l=Object(s.a)(i,2),d=l[0],u=l[1],j=Object(o.useState)({ordenId:t[0].ordenId,productos:t}),b=Object(s.a)(j,2),h=b[0];function p(e){e.preventDefault(),u(Object(A.a)(Object(A.a)({},d),{},Object(T.a)({},e.target.name,e.target.value)))}return b[1],Object(o.useEffect)((function(){var e=document.createElement("script"),t=document.createAttribute("data-preference-id");return t.value=c.id,e.src="https://www.mercadopago.com.ar/integrations/v1/web-payment-checkout.js",e.setAttributeNode(t),console.log(c),document.getElementById("form1").appendChild(e),function(){document.getElementById("form1").removeChild(e)}}),[]),Object(n.jsx)("div",{children:Object(n.jsxs)("form",{id:"form1",children:[Object(n.jsx)("h1",{className:"h1Checkout",children:"Checkout"}),Object(n.jsxs)("div",{children:[t.map((function(e,t){return Object(n.jsx)("div",{className:"listaProductosAComprar",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:e.title}),Object(n.jsx)("li",{children:"$"+e.unit_price}),Object(n.jsxs)("li",{children:[e.quantity," Unidad/es."]})]})},t)})),Object(n.jsx)("h1",{children:"Pagar con Credito/Debito"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S.a.post("http://localhost:3001/user/tarjeta/"+a.id,{data:d,stock:h}).then((function(e){console.log("SOY",e),r.push("/user/finalizarcompra")})).catch((function(e){console.log("EEEEEEEEEEEEE",e)}))},className:"finalizarCompra",children:[Object(n.jsx)("h1",{children:"Datos de la tarjeta"}),Object(n.jsx)("input",{onChange:p,type:"number",placeholder:"Numero de tarjeta",name:"numeroDeTarjeta"},"Numero de tarjeta"),Object(n.jsx)("input",{onChange:p,type:"text",placeholder:"Nombre",name:"nombreT"},"Nombre"),Object(n.jsx)("input",{onChange:p,type:"text",placeholder:"Fecha de expiracion",name:"fechaDeExpiracion"},"Fecha de expiracion"),Object(n.jsx)("input",{onChange:p,type:"number",placeholder:"Codigo de Seguridad",name:"codigoDeSeguridad"},"Codigo de Seguridad"),Object(n.jsx)("div",{className:"divBotonCargarDatosTarjeta",children:Object(n.jsx)("input",{className:"botonCargarDatosTarjeta",onChange:p,type:"submit",value:"Cargar datos"},"boton")})]}),Object(n.jsx)("h1",{children:"Pagar con Mercado Pago"})]})]})})}));var je=Object(l.b)((function(e){return{carrito:e.carrito}}))((function(e){var t=Object(o.useState)(""),c=Object(s.a)(t,2),a=c[0],r=c[1],i=e.carrito,l=i.map((function(e){return{title:e.nombre,unit_price:e.precio,quantity:e.cantidad,ordenId:e.ordenId,id:e.productId}}));console.log("OBJJJJ",l);var d={data:l};return console.log("OBJJJJ1",d),console.log("ORDEN IDDD",e.carrito[0].ordenId),Object(o.useEffect)((function(){S.a.post("http://localhost:3001/mercadopago/"+i[0].ordenId,d).then((function(e){r(e.data),console.info("contenido de data:",e)})).catch((function(e){console.error(e)}))}),[]),Object(n.jsx)("div",{children:a?Object(n.jsx)(ue,{productos:l,data:a}):Object(n.jsx)("p",{children:"aguarde un momento...."})})}));c(471);var be=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=Object(o.useState)(),c=Object(s.a)(t,2),a=c[0],r=c[1];function i(e){e.preventDefault(),r(Object(A.a)(Object(A.a)({},a),{},Object(T.a)({},e.target.name,e.target.value)))}function l(t){t.preventDefault(),a.calle&&a.numero&&a.localidad&&a.provincia&&a.codigoPostal?S.a.post("http://localhost:3001/user/compra/".concat(e.user.id),a,{withCredentials:!0}).then((function(t){k()({title:"Compra finalizada con \xe9xito!",icon:"success"}),console.log("SOY EMAIL",e.user.email);e.user.email;S.a.get("http://localhost:3001/auth/send-email/"+e.user.email).then((function(e){console.log("SI",e),window.location.replace("http://localhost:3000/")})).catch((function(e){console.log("NO",e)}))})).catch((function(e){console.log("SOY",e)})):k()({title:"Faltan llenar campos",text:"...todos los campos son obligatorios",icon:"info"})}return Object(n.jsx)("div",{className:"divFinalizarCompra",children:Object(n.jsxs)("form",{onSubmit:l,className:"direccionDeEnvio",children:[Object(n.jsx)("h1",{children:"Direccion de envio"}),Object(n.jsx)("input",{onChange:i,type:"text",placeholder:"Calle",name:"calle"},"calle"),Object(n.jsx)("input",{onChange:i,type:"number",placeholder:"N\xfamero",name:"numero"},"numero"),Object(n.jsx)("input",{onChange:i,type:"text",placeholder:"Localidad",name:"localidad"},"localidad"),Object(n.jsx)("input",{onChange:i,type:"text",placeholder:"Provincia",name:"provincia"},"provincia"),Object(n.jsx)("input",{onKeyPress:function(e){"Enter"===e.key&&l(e)},onChange:i,type:"number",placeholder:"C\xf3digo Postal",name:"codigoPostal"},"codigoPostal"),Object(n.jsx)("button",{onChange:i,type:"submit",value:"Finalizar Compra"},"boton")]})})}));c(472);function he(e){var t=Object(o.useState)(),c=Object(s.a)(t,2),a=c[0],r=c[1];function i(){S.a.get("http://localhost:3001/user").then((function(e){r(e.data),console.log("SOY USERS",e.data)})).catch((function(e){console.log("error",e)}))}return Object(o.useEffect)((function(){i()}),[]),Object(n.jsx)("div",{className:"divGeneralUsuarios",children:a&&a.map((function(e){return Object(n.jsxs)("div",{className:"divUsuarios",children:[Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"ID de usuario:"}),e.id]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"Usuario:"}),e.nombre," ",e.apellido]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"Email:"}),e.email]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("span",{children:"Admin:"})," ",e.admin?"SI":"No"]}),e.admin?Object(n.jsx)("button",{onClick:function(t){return function(e,t){e.preventDefault(),console.log(t),S.a.post("http://localhost:3001/auth/promoteF/"+t).then((function(e){i()})).catch((function(e){console.log(e)}))}(t,e.id)},children:"Eliminar Admin"}):Object(n.jsx)("button",{onClick:function(t){return function(e,t){e.preventDefault(),console.log(t),S.a.post("http://localhost:3001/auth/promote/"+t).then((function(e){i()})).catch((function(e){console.log(e)}))}(t,e.id)},children:"Hacer Admin"})]})}))})}var pe=Object(l.b)((function(e){return{logged:e.logged,user:e.user,carrito:e.carrito,editProduct:e.editarProducto}}),(function(e){return{onAddCarrito:function(t){e(C(t))},onAddUser:function(t){return e(function(e){return{type:f,user:e}}(t))}}}))((function(e){function t(t){switch(e.user.admin||(t=-1),t){case 0:return Object(n.jsx)(U,{});case 1:return Object(n.jsx)(B,{});case 2:return Object(n.jsx)(ce,{});case 3:return Object(n.jsx)(G,{id:e.editProduct});case 4:return Object(n.jsx)(ce,{});case 5:return Object(n.jsx)(G,{});case 6:return Object(n.jsx)(he,{});default:return Object(n.jsx)(re,{access:"administradores"})}}function c(t){switch(e.user.id&&(t=-1),t){case 0:return Object(n.jsx)(ne,{});case 1:return Object(n.jsx)(ae,{});default:return Object(n.jsx)(re,{access:"invitados"})}}return Object(o.useEffect)((function(){!0===e.logged&&S.a.get("http://localhost:3001/user/cart/".concat(e.user.userId)).then((function(t){e.onAddCarrito(t.data)})).catch((function(e){console.log("ERROR",e)})),e.user.id||S.a.get("http://localhost:3001/auth/me",{withCredentials:!0}).then((function(t){console.log("Respuesta del /me: ",t.data),e.onAddUser(t.data)})).catch((function(e){return console.log("Error del /me: ",e)}))}),[]),Object(n.jsx)(y.a,{children:Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(N.a,{path:"/",component:function(){return e.user.admin?Object(n.jsx)(J,{}):e.user.id?Object(n.jsx)(I,{}):Object(n.jsx)(z,{})}}),Object(n.jsx)(N.a,{exact:!0,path:"/",component:F}),Object(n.jsx)(N.a,{exact:!0,path:"/admin/formProduct",component:function(){return t(0)}}),Object(n.jsx)(N.a,{exact:!0,path:"/admin/formCategory",component:function(){return t(1)}}),Object(n.jsx)(N.a,{exact:!0,path:"/admin/ordenes",component:function(){return t(2)}}),Object(n.jsx)(N.a,{exact:!0,path:"/admin/product/edit",component:function(){return t(3)}}),Object(n.jsx)(N.a,{path:"/admin/ordenes/:status",component:function(){return t(4)}}),Object(n.jsx)(N.a,{path:"/admin/products/editar",component:function(){return t(5)}}),Object(n.jsx)(N.a,{exact:!0,path:"/admin/usuarios",component:function(){return t(6)}}),Object(n.jsx)(N.a,{exact:!0,path:"/user/carrito",component:oe})," ",Object(n.jsx)(N.a,{exact:!0,path:"/user/products",component:P})," ",Object(n.jsx)(N.a,{exact:!0,path:"/user/perfil",component:le}),Object(n.jsx)(N.a,{exact:!0,path:"/user/ordenes",component:de}),Object(n.jsx)(N.a,{exact:!0,path:"/user/pagar",component:je}),Object(n.jsx)(N.a,{exact:!0,path:"/user/finalizarcompra",component:be}),Object(n.jsx)(N.a,{exact:!0,path:"/user/nuevo",component:function(){return c(0)}}),Object(n.jsx)(N.a,{exact:!0,path:"/user/ingresar",component:function(){return c(1)}}),Object(n.jsx)(N.a,{path:"/detalle/:id",component:se}),Object(n.jsx)(N.a,{path:"/products/:id",component:_}),Object(n.jsx)(N.a,{path:"/user/product/:id",component:_})]})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=c(80),me={arrayCheckBox:[],formulario:{categories:[]},user:{},carrito:[],logged:null,categoria:null,filtrarCategoria:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(A.a)(Object(A.a)({},e),{},{carrito:t.carrito});case d:return Object(A.a)(Object(A.a)({},e),{},{formulario:t.form});case u:return Object(A.a)(Object(A.a)({},e),{},{search:t.search});case j:return Object(A.a)(Object(A.a)({},e),{},{searchFilter:t.search});case b:return Object(A.a)(Object(A.a)({},e),{},{categoria:t.categories});case x:return Object(A.a)(Object(A.a)({},e),{},{filtrarCategoria:t.categories});case h:return Object(A.a)(Object(A.a)({},e),{},{products:t.products});case p:return Object(A.a)(Object(A.a)({},e),{},{orders:t.orders});case m:return"admin"===t.logged?Object(A.a)(Object(A.a)({},e),{},{logged:"admin",user:{userId:1,nombre:"Gonzalo",apellido:"Rodriguez",nombreDeUsuario:"admin",email:"rodriguezgonzalo97@gmail.com",clave:"test"}}):t.logged?Object(A.a)(Object(A.a)({},e),{},{logged:!0,user:{userId:2,nombre:"Gonzalo",apellido:"Rodriguez",nombreDeUsuario:"usuario",email:"rodriguezgonzalo97@gmail.comm",clave:"test"}}):Object(A.a)(Object(A.a)({},e),{},{logged:!1,user:{}});case g:return Object(A.a)(Object(A.a)({},e),{},{editarProducto:t.editarProducto});case f:return Object(A.a)(Object(A.a)({},e),{},{user:t.user});default:return e}},fe=Object(Oe.d)(ge,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(l.a,{store:fe,children:Object(n.jsx)(pe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[473,1,2]]]);
//# sourceMappingURL=main.2afc8c08.chunk.js.map